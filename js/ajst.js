"use strict";(()=>{function u(a){return a===null||typeof a!="object"||"Symbol"in window&&typeof Symbol.toStringTag=="symbol"&&Symbol.toStringTag in a&&a[Symbol.toStringTag]==="Object"?!1:Object.prototype.toString.call(a)==="[object Object]"}function g(a){try{return JSON.parse(JSON.stringify(a))}catch{return}}function v(a){return Array.isArray(a)?a.every(e=>typeof e[0]=="string"&&(Object.prototype.toString.call(e[1])==="[object Arguments]"||Array.isArray(e[1]))):!1}function w(a){return typeof a!="string"?!1:/^GTM-[A-Z0-9]{6,}$/.test(a)}function k(a){window[a]instanceof Array||(window[a]=[])}function q(a,e){let t=[a],r=[];for(;t.length>0;){let n=t.pop(),i=n.querySelectorAll(e);i.length>0&&r.push(i);for(let s of n.querySelectorAll("iframe"))s.contentDocument&&t.push(s.contentDocument)}return r}function x(a){let e=a.split(".");for(let t of e)if(t.length===0||!/^[a-zA-Z0-9][a-zA-Z0-9_-]*$/.test(t)||/[-_]$/.test(t)||/[-_]{2}/.test(t))return!1;return!0}function y(a){typeof self.reportError=="function"?self.reportError(a):setTimeout(function(){throw a})}function E(a,e=2166136261){let t=e;for(let r=0;r<a.length;r++)t^=a.charCodeAt(r),t*=16777619;return(t>>>0).toString(16)}function o(a){return[{message:a}]}var l=class{constructor(e,t){this.rules=e,this.domManager=t}validateEvent(e,t){if(e.length===0)return o("Event name must not be empty");let r=this.rules.events[e];if(r===void 0)return o(`Event name "${e}" is not found in allowed events`);let n=r.container_name,i=[];typeof n=="string"&&(i=this.validateContainerPayload(t,n,r));let s=this.getPayloadWithoutContainer(t,n),m=this.validateTopLevelPayload(s,r);return[...i,...m]}validatePayload(e){return Object.entries(e).flatMap(([t,r])=>this.validatePayloadProperty(t,r))}validateContainerPayload(e,t,r){let n=e[t];if(!u(n))return o(`Missed expected container with name "${t}" in event payload`);let i=Object.keys(n),s=(r.container_required_properties??[]).reduce((_,b)=>i.includes(b)?_:_.concat(o(`Required property ${b} is not defined in container "${t}" payload`)),[]),m=this.validatePayload(n);return[...s,...m]}validateTopLevelPayload(e,t){let r=Object.keys(e);for(let n of t.required_properties??[])if(!r.includes(n))return o(`Required property key "${n}" is not defined in event payload`);return this.validatePayload(e)}getPayloadWithoutContainer(e,t){if(typeof t!="string")return e;let r={};for(let[n,i]of Object.entries(e))n!==t&&(r[n]=i);return r}validatePayloadProperty(e,t){if(e.length===0)return o("Received a payload with an empty property key");let r=this.rules.properties[e];if(r===void 0)return o(`Property key "${e}" is not found in allowed properties`);switch(r.type){case"string":return this.validateString(e,t,r);case"choice":return this.validateChoice(e,t,r);case"boolean":return this.validateBoolean(e,t);case"number":return this.validateNumber(e,t);case"array":return this.validateArray(e,t,r);default:return o(`Property "${e}" has unknown type "${r.type}". Please check your rules`)}}validateString(e,t,r){if(typeof t!="string")return o(`Property "${e}" must be string, but got "${typeof t}"`);if(r.min_length!==void 0&&t.length<r.min_length)return o(`Property "${e}" must be at least ${r.min_length} characters long`);if(r.max_length!==void 0&&t.length>r.max_length)return o(`Property "${e}" must be no longer than ${r.max_length} characters long`);if(r.check_format===!0&&!x(t))return o(`Property value "${t}" for key "${e}" have not passed format check`);if(typeof r.check_attribute=="string"){let n=r.check_attribute,i=q(this.domManager,`[${n}="${t}"]`);if(i.every(s=>s.length===0))return o(`Document does not contain element with attribute "${n}" and value "${t}", but it is required to be present in the document`);if(r.check_attribute_unique_id===!0&&i.some(s=>s.length>1))return o(`Document contains more than one element with attribute "${n}" and value "${t}", but it is required to be unique in the document`)}return[]}validateChoice(e,t,r){let n=t;return typeof t=="string"&&(n=E(t)),r.choice_values.includes(n)?[]:o(`Property "${e}" does not have allowed value "${t}"`)}validateBoolean(e,t){return typeof t!="boolean"?o(`Property "${e}" must be boolean, got "${typeof t}"`):[]}validateNumber(e,t){return typeof t!="number"||!isFinite(t)?o(`Property "${e}" must be a finite number, but got "${typeof t}"`):[]}validateArray(e,t,r){if(!Array.isArray(t))return o(`Property "${e}" must be an array, got "${typeof t}"`);for(let n of t){if(!u(n))return o(`Property "${e}" must be an array of objects, got "${typeof n}" in array`);let i=Object.keys(n);for(let s of r.array_required_properties??[])if(!i.includes(s))return o(`Required property key "${s}" is not defined in array item of property "${e}"`)}return[]}};var d=class extends Error{constructor(e){super(e),this.name="AnalyticsError"}},c=class extends d{constructor(e){super(e),this.name="AnalyticsInitializationError"}},p=class extends d{constructor(t,r){super(`method call error: ${t}(...) ${r}`);this.name="AnalyticsMethodCallError",this.methodName=t}},f=class extends d{constructor(t){let r=t.map(n=>n.message).map((n,i)=>`${i+1}. ${n}`).join(`
`);super(r);this.name="AnalyticsValidationAggregateError",this.errors=t}};var h=class{constructor(e){this.eventPayloadDefaults=new Map;this.options=Object.freeze({validationRules:e.validationRules,dataLayerName:"dataLayer"}),this.validator=new l(this.options.validationRules,document)}get facade(){return this._facade||(this._facade=this.createFacade()),this._facade}createFacade(){return Object.seal({setDefaults:(e,t)=>this.setDefaults(e,t),deleteDefaults:e=>this.deleteDefaults(e),track:(e,t)=>this.track(e,t)})}throwValidationErrors(e){y(new f(e))}throwMethodCallError(e,t){y(new p(e,t))}setDefaults(e,t){if(t=g(t),typeof e!="string"){this.throwMethodCallError("setDefaults",`the key must be string but got "${typeof e}"`);return}let r=this.validator.validatePayload({[e]:t});if(r.length>0){this.throwValidationErrors(r);return}this.eventPayloadDefaults.set(e,t),this.pushInternalEvent({[e]:t,"ajst.js.defaults":"set"})}deleteDefaults(e){if(typeof e!="string"){this.throwMethodCallError("deleteDefaults",`the key must be string but got "${typeof e}"`);return}this.eventPayloadDefaults.delete(e),this.pushInternalEvent({[e]:null,"ajst.js.defaults":"delete"})}track(e,t){if(typeof e!="string"){this.throwMethodCallError("track",`the event name must be string but got "${typeof e}"`);return}let r;if(typeof t>"u")r={};else if(u(t))r=g(t)||{};else{this.throwMethodCallError("track",`event payload must be literal object, got "${typeof t}"`);return}let n={...Object.fromEntries(this.eventPayloadDefaults),...r},i=this.validator.validateEvent(e,n);if(i.length>0){this.throwValidationErrors(i);return}let s={...Object.keys(n).reduce((m,_)=>(m[_]=null,m),{}),...Object.fromEntries(this.eventPayloadDefaults)};this.pushToDataLayer({...n,event:e,initiator:"ajst.js"}),this.pushToDataLayer({...s,event:null,initiator:null})}pushToDataLayer(e){let t=window[this.options.dataLayerName];if(!Array.isArray(t)){this.throwMethodCallError("pushToDataLayer","could not find valid dataLayer object on the page");return}t.push({...e,_clear:!0})}pushInternalEvent(e){this.pushToDataLayer({...e})}};function P(a,e="dataLayer"){let t=window[e];if(!Array.isArray(t))throw new Error("could not find valid dataLayer object on the page");if(!w(a))throw new Error("ajst.js: trying to inject GTM with invalid containerId");t.push({"gtm.start":new Date().getTime(),event:"gtm.js"});{let r=document.getElementsByTagName("script")[0],n=document.createElement("script"),i=e!="dataLayer"?"&l="+e:"";n.async=!0,n.src="https://www.googletagmanager.com/gtm.js?id="+a+i,r.parentNode.insertBefore(n,r)}}function j(a,e){function t(r,n){throw new c(`Invalid ${r}(...) arguments: ${JSON.stringify(n)}`)}try{for(let[r,n]of e)switch(r){case"track":(n.length===0||n.length>2)&&t("track",n),a.track(n[0],n[1]);break;case"setDefaults":n.length!==2&&t("setDefaults",n),a.setDefaults(n[0],n[1]);break;case"deleteDefaults":n.length!==1&&t("deleteDefaults",n),a.deleteDefaults(n[0]);break;default:throw new c(`Unknown pending analytics action: ${r}`)}}catch(r){throw new c(`Error while replaying pending analytics: ${r instanceof Error?r.message:JSON.stringify(r)}`)}}var T={events:{activate:{required_properties:["semrush_product_name","semrush_team"]},add_payment_info:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},add_shipping_info:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},add_to_cart:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},add_to_wishlist:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},begin_checkout:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},bounce:{required_properties:["semrush_product_name","semrush_team"]},change:{required_properties:["semrush_product_name","semrush_team"]},click:{required_properties:["semrush_product_name","semrush_team"]},close:{required_properties:["semrush_product_name","semrush_team"]},create:{required_properties:["semrush_product_name","semrush_team"]},deactivate:{required_properties:["semrush_product_name","semrush_team"]},deliver:{required_properties:["semrush_product_name","semrush_team"]},earn_virtual_currency:{required_properties:["semrush_product_name","semrush_team","value","virtual_currency_name"]},edit:{required_properties:["semrush_product_name","semrush_team"]},form_reset:{required_properties:["semrush_product_name","semrush_team"]},form_start:{required_properties:["form_name","semrush_product_name","semrush_team"]},form_submit:{required_properties:["form_name","form_submit_text","semrush_product_name","semrush_team"]},generate_lead:{required_properties:["semrush_product_name","semrush_team"]},grant_access:{required_properties:["semrush_product_name","semrush_team"]},hide:{required_properties:["semrush_product_name","semrush_team"]},hover:{required_properties:["semrush_product_name","semrush_team"]},input:{required_properties:["semrush_product_name","semrush_team"]},join_group:{required_properties:["semrush_product_name","semrush_team"]},login:{required_properties:["method","semrush_product_name","semrush_team"]},open:{required_properties:["semrush_product_name","semrush_team"]},purchase:{container_name:"ecommerce",container_required_properties:["currency","items","transaction_id","value"],required_properties:["semrush_product_name","semrush_team"]},refund:{container_name:"ecommerce",container_required_properties:["currency","items","transaction_id","value"],required_properties:["semrush_product_name","semrush_team"]},reject:{required_properties:["semrush_product_name","semrush_team"]},remove_from_cart:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},revoke_access:{required_properties:["semrush_product_name","semrush_team"]},search:{required_properties:["search_term","semrush_product_name","semrush_team"]},select_content:{required_properties:["semrush_product_name","semrush_team"]},select_item:{container_name:"ecommerce",container_required_properties:["items"],required_properties:["semrush_product_name","semrush_team"]},select_promotion:{container_name:"ecommerce",container_required_properties:["items"],required_properties:["semrush_product_name","semrush_team"]},send:{required_properties:["semrush_product_name","semrush_team"]},share:{required_properties:["semrush_product_name","semrush_team"]},show:{required_properties:["semrush_product_name","semrush_team"]},sign_up:{required_properties:["method","semrush_product_name","semrush_team"]},sm_error:{required_properties:["semrush_product_name","semrush_team"]},spend_virtual_currency:{required_properties:["semrush_product_name","semrush_team","value","virtual_currency_name"]},tutorial_begin:{required_properties:["semrush_product_name","semrush_team"]},tutorial_complete:{required_properties:["semrush_product_name","semrush_team"]},unsubscribe:{required_properties:["semrush_product_name","semrush_team"]},upload:{required_properties:["semrush_product_name","semrush_team"]},view_cart:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},view_item:{container_name:"ecommerce",container_required_properties:["currency","items","value"],required_properties:["semrush_product_name","semrush_team"]},view_item_list:{container_name:"ecommerce",container_required_properties:["items"],required_properties:["semrush_product_name","semrush_team"]},view_promotion:{container_name:"ecommerce",container_required_properties:["items"],required_properties:["semrush_product_name","semrush_team"]}},properties:{_clear:{type:"boolean"},addon_type:{check_format:!0,max_length:27,min_length:1,type:"string"},affiliation:{check_format:!0,max_length:100,min_length:1,type:"string"},app_name:{check_format:!0,max_length:100,min_length:1,type:"string"},corporate_type:{choice_values:["a723c6f6","60785ef0"],type:"choice"},coupon:{check_format:!0,max_length:100,min_length:1,type:"string"},creative_name:{check_format:!0,max_length:100,min_length:1,type:"string"},creative_slot:{check_format:!0,max_length:100,min_length:1,type:"string"},currency:{check_format:!0,max_length:100,min_length:1,type:"string"},discount:{type:"number"},event_source:{check_format:!0,max_length:100,min_length:1,type:"string"},file_extension:{check_format:!0,max_length:100,min_length:1,type:"string"},file_name:{check_format:!0,max_length:100,min_length:1,type:"string"},form_destination:{check_format:!0,max_length:100,min_length:1,type:"string"},form_id:{check_format:!0,max_length:100,min_length:1,type:"string"},form_name:{check_format:!0,max_length:100,min_length:1,type:"string"},form_submit_text:{max_length:100,min_length:1,type:"string"},group_id:{check_format:!0,max_length:100,min_length:1,type:"string"},index:{type:"number"},item_brand:{check_format:!0,max_length:100,min_length:1,type:"string"},item_category:{check_format:!0,max_length:100,min_length:1,type:"string"},item_category2:{check_format:!0,max_length:100,min_length:1,type:"string"},item_category3:{check_format:!0,max_length:100,min_length:1,type:"string"},item_category4:{check_format:!0,max_length:100,min_length:1,type:"string"},item_category5:{check_format:!0,max_length:100,min_length:1,type:"string"},item_id:{check_format:!0,max_length:100,min_length:1,type:"string"},item_label:{check_format:!0,max_length:100,min_length:1,type:"string"},item_list_id:{check_format:!0,max_length:100,min_length:1,type:"string"},item_list_name:{check_format:!0,max_length:100,min_length:1,type:"string"},item_location:{check_attribute:"data-path",check_format:!0,max_length:100,min_length:1,type:"string"},item_name:{check_format:!0,max_length:100,min_length:1,type:"string"},item_variant:{check_format:!0,max_length:100,min_length:1,type:"string"},items:{array_required_properties:["item_name"],type:"array"},limit_name:{check_format:!0,max_length:100,min_length:1,type:"string"},link_classes:{max_length:100,min_length:1,type:"string"},link_domain:{max_length:100,min_length:1,type:"string"},link_id:{max_length:100,min_length:1,type:"string"},link_text:{max_length:100,min_length:1,type:"string"},link_url:{max_length:100,min_length:1,type:"string"},location_id:{check_format:!0,max_length:100,min_length:1,type:"string"},method:{check_format:!0,max_length:100,min_length:1,type:"string"},outbound:{type:"boolean"},percent_scrolled:{type:"number"},price:{type:"number"},promotion_id:{check_format:!0,max_length:100,min_length:1,type:"string"},promotion_name:{check_format:!0,max_length:100,min_length:1,type:"string"},quantity:{type:"number"},search_term:{max_length:100,min_length:1,type:"string"},semrush_product_name:{choice_values:["b4efba00","7c3d8dda","cb59f7b8","2d4a458c","d9b65240","2754584e","c4c76008","aef8a083","e1763898","60a988e0","31e68268","14369678","1e36a638","c6312408","17255210","c9c2e245","257ab034","c3689b4c","6788e980","f5bdca70","11b4cc18","6e8cd55a","216a8650","2d72e7fc","10617134","14617780","d8533e6e","3026594c","eaabdac4","c949c9c8","8d0f85d8","51b7e0f8","59343244","64446982","7afe2eb4","9d411ddf","d73c78dc","290e3b","ce7db770","32e80181","22756680","eadacaf1","582a648","62c8a6c0","592c88d4","eab9cb2c","5224bab0","387da958","f65ca590","3339178a","df552dac","d2e961c","d4c7d498","c2a1ca80","348f66ec","4a847f6c","fdbd876c","bc6278ee","627c3824","af862d5e","f14aecf0","df38ecb0","fd2774f4","503f2df5","f538990c","fd8c9743","2ebae3c0","fdcd084c","2f0cf636","cb179448","4f87aa10","e92a5904","8c32dd40","d4f11082","e688970c","e1128cd8","9d761dc4","3915e36a","10d148f0","ba8f46b0","d0a1f4a6","10505d86","541bb1e0","40200f94","ec9f2d30","540ca758","ab232ccf","c1919d64","fdc15fca","15620b2d","d21703d0","3b35e4b0","9ae84dd0","99f4bd9c","f3690211","e3aa8c","3f3ec460","be061980","1e8e4e3e","b3d08c4e","9a98ffb3","503ba25c","fe112df0","82832cf4","2f8732a6","7da8ad89","31047670","f335c236","af36c374","656097ac","6dbd6170","575d240c","a0263ac6","39640258","8b90d68","6175707c","6f22a18c","91165b04","71f0d7a","ff3e77a8","709332fc","75af032c","2e34f28","135c897c","3b272cf8","ac0ae518","d00ea924","e863c80c","60a4767c","8be0c794","f8d3b229","c85014c0","40f5e3b1","e662f758","1d675d7d","e37e26a8","bb12ea3f","594e10c0","bfa55036","2f5096f8","7471b74","b7758464","c5e20850","6a05c5c0","6ee88360","6d6875ab","da991963","cba1e474","e919ae4c","c72ac82c","6c1ceb68","f9307ccc","2fbee8","733b2b9f","177e2c28","694d3a6c","ddf25f08","3f422948","4edcfa48","c6a6ef40","5a27eeb0","35802360","a3cf97a0","ae45431e","eba79e28","4d305f4","16582aff","acdb8650","9b6ef2ba","32b40feb","e9401b94","18610600","4e7fbc7c","a13bacac","24ced8ad","e588c6a3","e62cd600","f7679540","9d63c718","68b94fa3","819ebcc8","9f09c0fc","92290444","70c9df80","64c7baf8","e8f6920c","9795f148","f6460f48","5ddb7124","9869c534","63b76588","1997e04","227cf4ac","901a6798","8ee85ea9","3bb2d56c","a8160380","c6714f4c","c89e00d4","81938d14","4e1320d","6dc06d7c","c1f4c58c","e1403ebc","2d41cb9f","620e3918","b9fb4182","e1417500","bf451110","d8c403db","91922bf8","6845b285","e7f16158","5bd10de8","d917b674","1f943408","542421c8","cd4baa60","bfc36750","6504fd08","43e6fb6c","77a709b0","52bc9e1c","4c2f983c","808f418","df8a505b","fab68d46","89928ecc","e4a246d4","9c240ebc","7e09ef78","59c2da0c","1846f090","fc31fc98"],type:"choice"},semrush_team:{choice_values:["cbe0afe8","cbe0afe8","8f1d9e68","fc6bd1a8","e83e91ac","ab476690","42fe3db8","baf34f7c","15bd3a57","13009be4","13fc28d0","eb2b48b4","10833d22","762db1bc","3ad8b63c","eeee1f88","355129f4","c941b9a4","12c19f6f","6139321f","a32d62f","9b1344a6","abdb577","3dc78ae8","d4a2c3f8","a0df61a8","77f81c2c","be0d093e","d5f545d","97ea166b","bd74f7a4","e1bbaf6c","9b9a988b","d352a9cc","65bbd010","f37f1b8","6159c07c","45aff120","d1d10994","23c34728","7f82f753","dcf296c8","11fcda08","d46f1858","4f5bc6d4","9501c97b","cf8de110","f2dfe3a2","5529c710","5b129660","343f214","d84cd08f","98ff6ff4","29ab114c","89fde3ec","48992797","c653a1c0","bcf7e6f0","f0a5dbc0","2d3d1fbc","5f9ab908","283ac65c","1afbb120","64917968","fc5377a0","c92771da","6753a32b","49f0ff04"],type:"choice"},shipping:{type:"number"},shipping_tier:{check_format:!0,max_length:100,min_length:1,type:"string"},state:{check_format:!0,max_length:100,min_length:1,type:"string"},status:{check_format:!0,max_length:100,min_length:1,type:"string"},subscription_type:{choice_values:["65506730","55d3fd78","f7db2887","fe5d0260","7c996b60","5037db6c"],type:"choice"},tax:{type:"number"},traffic_type:{choice_values:["b4c4184","8c0a9004"],type:"choice"},transaction_id:{check_format:!0,max_length:100,min_length:1,type:"string"},type:{check_format:!0,max_length:100,min_length:1,type:"string"},user_id:{max_length:100,min_length:1,type:"string"},user_type:{choice_values:["d7945ef0","3d04b384","fe5d0260","9fde760c","c949f120","8a19c3d8","957f4154"],type:"choice"},value:{type:"number"},video_current_time:{type:"number"},video_duration:{type:"number"},video_percent:{type:"number"},video_provider:{check_format:!0,max_length:100,min_length:1,type:"string"},video_title:{check_format:!0,max_length:100,min_length:1,type:"string"},video_url:{check_format:!0,max_length:100,min_length:1,type:"string"},virtual_currency_name:{check_format:!0,max_length:100,min_length:1,type:"string"},visible:{type:"boolean"}}};function $(){let a=Symbol.for("ajst.js.alreadyLoaded");if(window[a])throw new c("ajst.js is already loaded, and it should not be loaded twice");let e=window.pendingAnalytics;if(!v(e))throw new c('ajst.js was not initialized properly. "pendingAnalytics" is missing or not an array');let t="dataLayer";k(t);let r=new h({validationRules:T}),n=r.facade;window.analytics=n,window[a]=!0,window.pendingAnalytics=void 0,r.pushInternalEvent({"ajst.js.start":new Date().getTime()}),j(n,e),r.pushInternalEvent({"ajst.js.pending_calls_processed":new Date().getTime()});let i=window.ANALYTICS_GTM_ID;typeof i=="string"?(P(i,t),r.pushInternalEvent({"ajst.js.gtm_injected":new Date().getTime()})):(r.pushInternalEvent({"ajst.js.without_gtm":!0}),console.warn('ajst.js: "ANALYTICS_GTM_ID" is missing or in the wrong format. Continuing without GTM.'))}$();})();
